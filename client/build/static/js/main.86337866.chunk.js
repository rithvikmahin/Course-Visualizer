(this.webpackJsonpcourse=this.webpackJsonpcourse||[]).push([[0],{137:function(e,t,a){},144:function(e,t,a){e.exports=a(347)},149:function(e,t,a){},347:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(138),s=a.n(o),c=(a(149),a(139)),i=a(72),u=a.n(i),l=a(140),d=a(3),h=a(4),v=a(33),f=a(12),m=a(11),p=a(73),g=a.n(p),y=a(141),b=a.n(y),k=a(142),j=a.n(k),C=(a(137),a(52)),w=a(143);var E=function(e){var t,a=Object(n.useState)(""),o=Object(C.a)(a,2),s=o[0],c=o[1],i=Object(n.useState)(null),u=Object(C.a)(i,2),l=u[0],d=u[1],h=Object(n.useState)(null),v=Object(C.a)(h,2),f=v[0],m=v[1],p=Object(n.useRef)();p.current=f&&f.length>0&&s?f[0].item.subject+f[0].item.number:"";var g={keys:["subject","number"]};return Object(n.useEffect)((function(){document.getElementById("search-bar");d(e.data),l&&(t=new w.a(l,g))})),r.a.createElement("div",null,r.a.createElement("input",{type:"text",id:"search-bar",className:"search-bar",placeholder:"Enter a course number",onChange:function(e){var a=e.target.value;if(c(a),a){var n=a.replace(/\s/g,""),r=t.search(n);m(r)}},value:s}),r.a.createElement("div",{id:"search-result",className:"search-result",onClick:function(){return e.action(p.current)}},p.current))},O={req1:"#7045AF",req2:"#A7D129",req3:"#FF6C00"},G={name:"dagre",spacingFactor:.8,nodeSep:40,rankSep:300,rankDir:"TB",ranker:"longest-path"},S=function(e){Object(f.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(d.a)(this,a),(n=t.call(this,e)).state={container:null,data:null,chosenCourse:""},n.Fit=n.Fit.bind(Object(v.a)(n)),n.ChooseCourse=n.ChooseCourse.bind(Object(v.a)(n)),n}return Object(h.a)(a,[{key:"componentDidMount",value:function(){var e=Object(l.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.a.get("/courses");case 2:t=e.sent,this.setState({data:t.data}),a=document.getElementById("cytoscape"),this.Cytoscape(a),this.setState({container:a});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Cytoscape",value:function(e){var t=this;g.a.use(b.a);var a=g()({container:e,style:[{selector:"node",style:{"font-family":"Bahnschrift","font-size":"18",width:80,height:80,label:"data(id)",backgroundColor:"white",color:"black","text-valign":"center","text-halign":"center",opacity:.8}},{selector:"edge",style:{width:8,"mid-target-arrow-color":"white","mid-target-arrow-shape":"triangle","target-arrow-color":"white","target-arrow-shape":"triangle","curve-style":"bezier",opacity:.8}}]}),n=this.state.data,r=(a=this.GenerateGraph(a,n)).layout(G);a.on("tap","node",(function(e){t.GenerateGraphParents(e,a,!1)})),a.on("tap",(function(e){e.target==a&&t.RestoreGraph(a)})),a.on("mouseover","node",(function(e){t.DisplayNodeInfo(e)})),r.run(),a.resize();a.minZoom(.35),a.maxZoom(1.2);var o=a.elements();return a.fit(o),a}},{key:"DisplayNodeInfo",value:function(e){var t,a=e.target.id(),n=a.replace(/[0-9]/g,""),r=a.replace(/[A-Z]/g,""),o=Object(c.a)(this.state.data);try{for(o.s();!(t=o.n()).done;){var s=t.value;s.subject==n&&s.number==r&&console.log(s.description)}}catch(i){o.e(i)}finally{o.f()}}},{key:"GenerateGraphParents",value:function(e,t,a,n){var r;if(a)e=e,r=(r=t.nodes('[id="'+n+'"]').predecessors()).add(e);else{var o=(e=e).target.id();r=(r=t.nodes('[id="'+o+'"]').predecessors()).add(e.target)}var s=t.elements().not(r);t.remove(s);t.elements().makeLayout(G).run(),t.fit(t.elements())}},{key:"RestoreGraph",value:function(e){var t=this.state.container;if(t){var a=this.Cytoscape(t);a.elements().makeLayout(G).run(),a.fit(a.elements())}}},{key:"GenerateGraph",value:function(e,t){for(var a in t){var n=t[a],r=n.subject+n.number;e.filter("node[id = '".concat(r,"']")).length||e.add({group:"nodes",data:{id:r}})}for(var o in t){var s=t[o],c=s.subject+s.number;for(var i in s.prereqs){var u=O[i];for(var l in s.prereqs[i])l=s.prereqs[i][l],e.add({group:"edges",data:{id:"".concat(l,"-").concat(c),source:l,target:c}}),e.edges("edge[id = '".concat(l,"-").concat(c,"']")).style("line-color",u)}}return e}},{key:"Fit",value:function(){var e=this.state.container;if(e){var t=this.Cytoscape(e),a=t.elements();t.fit(a)}}},{key:"ChooseCourse",value:function(e){var t=this;this.setState({chosenCourse:e},(function(){var e=t.state.container;if(e){var a=t.Cytoscape(e),n=t.state.chosenCourse,r=a.getElementById(n);t.GenerateGraphParents(r,a,!0,n)}}))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{style:{display:"flex"}},r.a.createElement("div",{className:"graph",id:"cytoscape"}),r.a.createElement("div",{className:"search"},r.a.createElement(E,{data:this.state.data,action:this.ChooseCourse}))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[144,1,2]]]);
//# sourceMappingURL=main.86337866.chunk.js.map